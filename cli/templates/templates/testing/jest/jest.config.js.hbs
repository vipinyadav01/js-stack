{{#if typescript}}
/** @type {import('jest').Config} */
module.exports = {
  preset: 'ts-jest',
  testEnvironment: '{{#if frontend}}jsdom{{else}}node{{/if}}',
  roots: ['<rootDir>/src'],
  testMatch: [
    '**/__tests__/**/*.{{#if typescript}}ts{{else}}js{{/if}}',
    '**/*.(test|spec).{{#if typescript}}ts{{else}}js{{/if}}'
  ],
  transform: {
    '^.+\\.ts$': 'ts-jest',
    {{#if frontend.react}}
    '^.+\\.tsx$': 'ts-jest',
    {{/if}}
  },
  collectCoverageFrom: [
    'src/**/*.{{#if typescript}}ts{{else}}js{{/if}}',
    {{#if frontend.react}}
    'src/**/*.tsx',
    {{/if}}
    '!src/**/*.d.ts',
  ],
  {{#if frontend}}
  setupFilesAfterEnv: ['<rootDir>/src/setupTests.{{#if typescript}}ts{{else}}js{{/if}}'],
  moduleNameMapping: {
    '\\.(css|less|scss|sass)$': 'identity-obj-proxy',
  },
  {{/if}}
  {{#if backend}}
  testTimeout: 10000,
  {{/if}}
};
{{else}}
/** @type {import('jest').Config} */
module.exports = {
  testEnvironment: '{{#if frontend}}jsdom{{else}}node{{/if}}',
  roots: ['<rootDir>/src'],
  testMatch: [
    '**/__tests__/**/*.js',
    '**/*.(test|spec).js'
  ],
  collectCoverageFrom: [
    'src/**/*.js',
    '!src/**/*.d.js',
  ],
  {{#if frontend}}
  setupFilesAfterEnv: ['<rootDir>/src/setupTests.js'],
  moduleNameMapping: {
    '\\.(css|less|scss|sass)$': 'identity-obj-proxy',
  },
  {{/if}}
  {{#if backend}}
  testTimeout: 10000,
  {{/if}}
};
{{/if}}
